<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Preparation, Checking and Post-Processing Data for PK/PD Modeling • NMdata</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="48x48" href="favicon-48x48.png">
<link rel="icon" type="”image/svg+xml”" href="favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
<link rel="icon" sizes="any" href="favicon.ico">
<link rel="manifest" href="site.webmanifest">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><link href="extra.css" rel="stylesheet">
<script src="extra.js"></script><meta property="og:title" content="Preparation, Checking and Post-Processing Data for PK/PD Modeling">
<meta property="og:description" content="Efficient tools for preparation, checking and post-processing of data in PK/PD (pharmacokinetics/pharmacodynamics) modeling, with focus on use of Nonmem. Attention is paid to ensure consistency, traceability, and Nonmem compatibility of Data. Rigorously checks final Nonmem datasets. Implemented in data.table, but easily integrated with base and tidyverse.">
<meta property="og:image" content="https://nmautoverse.github.io/NMdata/reference/figures/apple-touch-icon-180x180.png">
<meta property="og:image:alt" content="Efficient data preparation, consistency-checking and post-processing in PK/PD modeling">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">NMdata</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.0.921</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa-home fa-lg"></span>

  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Vignettes

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="https://htmlpreview.github.io/?https://github.com/nmautoverse/NMdata/blob/master/vignettes/NMdata-cheat.html" class="external-link">Cheat Sheet</a>
    </li>
    <li>
      <a href="articles/NMscanData.html">NMscanData: find and combine all output and input data</a>
    </li>
    <li>
      <a href="articles/ParameterTables.html">Flexible Creation of Parameter Tables</a>
    </li>
    <li>
      <a href="articles/DataPrepare.html">Data Preparation Tools</a>
    </li>
    <li>
      <a href="articles/NMdata-FAQ.html">FAQ</a>
    </li>
  </ul>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
<li>
  <a href="https://github.com/NMautoverse/NMdata/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/NMautoverse/NMdata/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="nmdata">NMdata<a href="https://nmautoverse.github.io/NMdata/"><img src="reference/figures/logo.png" align="right" height="120"></a>
<a class="anchor" aria-label="anchor" href="#nmdata"></a>
</h1></div>
<!-- badges: start -->

<div class="section level2">
<h2 id="a-fast-r-package-for-efficient-data-preparation-consistency-checking-and-post-processing-in-pkpd-modeling">A fast R package for efficient data preparation, consistency-checking and post-processing in PK/PD modeling<a class="anchor" aria-label="anchor" href="#a-fast-r-package-for-efficient-data-preparation-consistency-checking-and-post-processing-in-pkpd-modeling"></a>
</h2>
<p>Pharmacometrics and PK/PD modeling offers unique information for decision-making in several steps of drug development. However, it often takes a lot of work to get there, and there are many pitfalls along the way. NMdata helps simplifying this work and steering around the pitfalls or at least making sure we didn’t fall into them.</p>
<div class="section level3">
<h3 id="flexibility-first">Flexibility first<a class="anchor" aria-label="anchor" href="#flexibility-first"></a>
</h3>
<p>Any functionality in the NMdata can be used independently of the rest of the package, and NMdata is not intended to force you to change any habits or preferences. Instead, NMdata tries to fit in with how you (or your colleague who worked on the project before you) do things. It likely provides helpful additions no matter what other tools you already use.</p>
</div>
<div class="section level3">
<h3 id="automate-book-keeping-and-focus-on-modeling">Automate book keeping and focus on modeling<a class="anchor" aria-label="anchor" href="#automate-book-keeping-and-focus-on-modeling"></a>
</h3>
<p>Preparing data sets - and if you use NONMEM, reading the results data - can be tedious, and mistakes can lead to hours of frustration. NMdata provides useful tools (including automated checks) for these trivial tasks. Highlights in data set preparation and data checking:</p>
<ul>
<li>
<code><a href="reference/mergeCheck.html">mergeCheck()</a></code> Require left-join merging to only add columns - and nothing else. If rows get duplicated or disappear, throw an error.<br>
</li>
<li>
<code><a href="reference/addTAPD.html">addTAPD()</a></code> Automatically add time after previous dose, previous dose amount, cumulative number of doses and other related columns. Works with <code>ADDL/II</code> notation too.<br>
</li>
<li>
<code><a href="reference/flagsAssign.html">flagsAssign()</a></code> and <code><a href="reference/flagsCount.html">flagsCount()</a></code> Automatically assign exclusion flags to data and tabulate number of subjects and observations excluded and/or retained due to each step.<br>
</li>
<li>
<code>NMorderColumns</code> Order columns in a Nonmem data set consistently and intuitively.<br>
</li>
<li>
<code><a href="reference/NMwriteData.html">NMwriteData()</a></code> Feature-rich data writer for Nonmem data sets. Can return text to be used for $INPUT and $DATA sections.<br>
</li>
<li>
<code><a href="reference/NMcheckData.html">NMcheckData()</a></code> Rigorous and extensive checking for structural errors and potential issues in Nonmem data sets.<br>
</li>
<li>
<code>NMcheckColnames.R()</code> Check data set against <code>INPUT</code> section of control streams.</li>
</ul>
<p>Check out <a href="https://nmautoverse.github.io/NMdata/articles/DataPrepare.html">this vignette</a> on data preparation.</p>
</div>
<div class="section level3">
<h3 id="read-model-results-in-a-consistent-table-structure">Read model results in a consistent table structure<a class="anchor" aria-label="anchor" href="#read-model-results-in-a-consistent-table-structure"></a>
</h3>
<p>While <code>NMdata</code> does not organize all results into single objects that can be further processed, it offers efficient functions to read model results. These functions are all built to handle multiple models and return results in simple, consistent structures. Their results can easily be merged as needed. Notice, all of these functions basically just need a control stream path to run.</p>
<ul>
<li>
<code><a href="reference/NMscanData.html">NMscanData()</a></code> Read and combine <code>$TABLE</code> output and input data. Feature-rich with support for the vast majority of models. Builds on <code><a href="reference/NMscanInput.html">NMscanInput()</a></code> to automatically read input data and <code><a href="reference/NMscanTables.html">NMscanTables()</a></code> to read all the output tables.<br>
</li>
<li>
<code><a href="reference/NMreadExt.html">NMreadExt()</a></code> A feature-rich processor of ext files. Provides final parameter estimates with uncertainties and everything else provided in the ext file, iterations, objective function value and termination status<br>
</li>
<li>
<code><a href="reference/NMreadParsText.html">NMreadParsText()</a></code> Very flexible processer of comments in control stream parameter sections. As long as the comments provide consistent parameter information in almost any format, <code><a href="reference/NMreadParsText.html">NMreadParsText()</a></code> can turn it into a table.<br>
</li>
<li>
<code><a href="reference/NMreadInits.html">NMreadInits()</a></code> Read and tabulate initial values, lower, upper limits, FIX and block structures based on parameter sections of control streams.<br>
</li>
<li>
<code><a href="reference/NMrelate.html">NMrelate()</a></code> Automatically connect parameters to variable names used in control stream code (say, <code>CL=EXP(THETA(1)+ETA(1))</code> in control stream and NMrelate will “relate” <code>THETA(1)</code> and <code>ETA(1)</code> to <code>CL</code>. Powerful for QC and even simple parameter table generation.<br>
</li>
<li>
<code><a href="reference/NMreadPhi.html">NMreadPhi()</a></code> Reads individual posthoc estimates into a <code>data.frame</code><br>
</li>
<li>
<code><a href="reference/NMreadCov.html">NMreadCov()</a></code> Reads an estimated variance-covariance matrix and formats as a matrix<br>
</li>
<li>
<code><a href="reference/NMreadShk.html">NMreadShk()</a></code> to read shrinkage tables</li>
</ul>
<p>Vignettes:<br><a href="https://NMautoverse.github.io/NMdata/articles/ParameterTables.html" class="external-link">Flexible Creation of Parameter Tables</a><br><a href="https://NMautoverse.github.io/NMdata/articles/NMscanData.html" class="external-link">NMscanData: Find And Combine All Output And Input Data</a></p>
</div>
<div class="section level3">
<h3 id="more-information">More information<a class="anchor" aria-label="anchor" href="#more-information"></a>
</h3>
<p>The best place to browse information about the package is <a href="https://nmautoverse.github.io/NMdata/">here</a>. The quickest way in is the <a href="https://htmlpreview.github.io/?https://github.com/nmautoverse/NMdata/blob/master/vignettes/NMdata-cheat.html" class="external-link">Cheatsheet</a>. It does not cover any features related to generation of parameter tables, so you may also want to take a look at that vignette.</p>
<!-- ![Cheatsheet](man/figures/cheatsheet_icon_0010.png){width="15%"} -->
<!-- [Cheatsheet](https://htmlpreview.github.io/?https://github.com/nmautoverse/NMdata/blob/master/devel/NMdata-cheat.html) -->
<p><a href="https://htmlpreview.github.io/?https://github.com/nmautoverse/NMdata/blob/master/vignettes/NMdata-cheat.html" class="external-link"><img src="reference/figures/cheatsheet_icon_0010.png" alt="CheatSheet" width="200"></a></p>
<p>Also, check out the most recent vignette on <a href="https://NMautoverse.github.io/NMdata/articles/ParameterTables.html" class="external-link">Flexible Creation of Parameter Tables</a> using NMdata.</p>
</div>
<div class="section level3">
<h3 id="how-to-install">How to install<a class="anchor" aria-label="anchor" href="#how-to-install"></a>
</h3>
<p><code>NMdata</code> is on <a href="https://cran.r-project.org/package=NMdata" class="external-link">CRAN</a> and <a href="https://mpn.metworx.com/docs/packages/NMdata" class="external-link">MPN</a>. To install from the package archive you are already using, do:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"NMdata"</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://NMautoverse.github.io/NMdata/" class="external-link">NMdata</a></span><span class="op">)</span></span></code></pre></div>
<p>See further below for instructions on how to install from other sources than your default archive, if need be.</p>
</div>
</div>
<div class="section level2">
<h2 id="prepare-check-and-export-pkpd-data">Prepare, check, and export PK/PD data<a class="anchor" aria-label="anchor" href="#prepare-check-and-export-pkpd-data"></a>
</h2>
<p>On the data-generation side, functionality is provided for documentation of the datasets while generating them. There are functions for automatic checks of (some) data merges, handling and counting of exclusions flags, final preparations for ensuring readability in NONMEM, and ensuring traceability of datasets back to data generation scripts.</p>
</div>
<div class="section level2">
<h2 id="check-data-as-read-by-nonmem">Check data as read by NONMEM<a class="anchor" aria-label="anchor" href="#check-data-as-read-by-nonmem"></a>
</h2>
<p>The <code>NMcheckData</code> function will do an extensive and fully automated set of checks of the data before you run NONMEM. And did NONMEM not behave? <code>NMcheckData</code> can debug the data <em>as seen by NONMEM</em>. That’s right - it has never been easier to find data bugs.</p>
</div>
<div class="section level2">
<h2 id="get-the-most-recent-version">Get the most recent version<a class="anchor" aria-label="anchor" href="#get-the-most-recent-version"></a>
</h2>
<p>If your archive has not been updated since July 2021, you may not find <code>NMdata</code> if you try to install with <code>install.packages</code> (option 1). In that case you have two other options. You can explicitly select CRAN for the installation. Or if you should want a version that has not yet reached CRAN, installing from Github is easy too.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Option 1: Install from your default repository</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"NMdata"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Option 2: Install explicitly from CRAN</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"NMdata"</span>,repos<span class="op">=</span><span class="st">"https://cloud.r-project.org"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Option 3: Install from github</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://remotes.r-lib.org" class="external-link">remotes</a></span><span class="op">)</span></span>
<span><span class="fu">install_github</span><span class="op">(</span><span class="st">"nmautoverse/NMdata"</span><span class="op">)</span></span></code></pre></div>
<p>If you use the Github version, you may want to see the <a href="https://nmautoverse.github.io/NMdata/articles/NMdata-FAQ.html">FAQ</a> for how to install specific releases from Github (ensuring reproducibility).</p>
</div>
<div class="section level2">
<h2 id="questions">Questions?<a class="anchor" aria-label="anchor" href="#questions"></a>
</h2>
<p>Check the <a href="https://nmautoverse.github.io/NMdata/articles/NMdata-FAQ.html">FAQ</a>, or ask on <a href="https://github.com/nmautoverse/NMdata/" class="external-link">github</a></p>
</div>
<div class="section level2">
<h2 id="issues">Issues?<a class="anchor" aria-label="anchor" href="#issues"></a>
</h2>
<p>The best way to report a bug or to request features is on <a href="https://github.com/nmautoverse/NMdata/" class="external-link">github</a>.</p>
</div>
<div class="section level2">
<h2 id="code-of-conduct">Code of Conduct<a class="anchor" aria-label="anchor" href="#code-of-conduct"></a>
</h2>
<p>Please note that the patchwork project is released with a <a href="https://nmautoverse.github.io/NMdata/CODE_OF_CONDUCT.html">Contributor Code of Conduct</a>. By contributing to this project, you agree to abide by its terms.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=NMdata" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/NMautoverse/NMdata/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/NMautoverse/NMdata/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing NMdata</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Philip Delff <br><small class="roles"> Author, maintainer </small>   </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://lifecycle.r-lib.org/articles/stages.html" class="external-link"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
<li><a href="https://github.com/nmautoverse/NMdata/actions" class="external-link"><img src="https://github.com/nmautoverse/NMdata/workflows/R-CMD-check/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://app.codecov.io/gh/nmautoverse/NMdata?branch=master" class="external-link"><img src="https://codecov.io/gh/NMautoverse/NMdata/branch/master/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://CRAN.R-project.org/package=NMdata" class="external-link"><img src="https://www.r-pkg.org/badges/version/NMdata" alt="CRAN status"></a></li>
<li><a href="https://cran.r-project.org/package=NMdata" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/NMdata" alt="CRAN downloads"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Philip Delff.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer>
</div>




  <script data-goatcounter="https://nmdata.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
</body>
</html>
