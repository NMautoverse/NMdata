<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Find and read input data and optionally translate column names according to the $INPUT section — NMscanInput • NMdata</title><!-- favicons --><link rel="icon" type="image/png" sizes="48x48" href="../favicon-48x48.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><script src="../extra.js"></script><meta property="og:title" content="Find and read input data and optionally translate column names according to the $INPUT section — NMscanInput"><meta property="og:description" content="This function finds and reads the input data based on a control
stream file path. It can align the column names to the definitions
in $INPUT in the control stream, and it can subset the data based
on ACCEPT/IGNORE statements in $DATA. It supports a few other ways
to identify the input data file than reading the control stream,
and it can also read an rds or fst file instead of the delimited
text file used by Nonmem."><meta property="og:image" content="https://nmautoverse.github.io/NMdata/reference/figures/apple-touch-icon-180x180.png"><meta property="og:image:alt" content="Efficient data preparation, consistency-checking and post-processing in PK/PD modeling"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">NMdata</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.1.912</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>

  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Vignettes

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="https://htmlpreview.github.io/?https://github.com/nmautoverse/NMdata/blob/master/vignettes/NMdata-cheat.html" class="external-link">Cheat Sheet</a>
    </li>
    <li>
      <a href="../articles/NMscanData.html">NMscanData: find and combine all output and input data</a>
    </li>
    <li>
      <a href="../articles/ParameterTables.html">Flexible Creation of Parameter Tables</a>
    </li>
    <li>
      <a href="../articles/DataPrepare.html">Data Preparation Tools</a>
    </li>
    <li>
      <a href="../articles/NMdata-FAQ.html">FAQ</a>
    </li>
  </ul></li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li>
  <a href="https://github.com/nmautoverse/NMdata/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/nmautoverse/NMdata/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Find and read input data and optionally translate column names according to the $INPUT section</h1>
    <small class="dont-index">Source: <a href="https://github.com/nmautoverse/NMdata/blob/master/R/NMscanInput.R" class="external-link"><code>R/NMscanInput.R</code></a></small>
    <div class="hidden name"><code>NMscanInput.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function finds and reads the input data based on a control
stream file path. It can align the column names to the definitions
in $INPUT in the control stream, and it can subset the data based
on ACCEPT/IGNORE statements in $DATA. It supports a few other ways
to identify the input data file than reading the control stream,
and it can also read an rds or fst file instead of the delimited
text file used by Nonmem.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">NMscanInput</span><span class="op">(</span></span>
<span>  <span class="va">file</span>,</span>
<span>  <span class="va">formats.read</span>,</span>
<span>  <span class="va">file.mod</span>,</span>
<span>  dir.data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  file.data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  apply.filters <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  translate <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  recover.cols <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  details <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  col.id <span class="op">=</span> <span class="st">"ID"</span>,</span>
<span>  <span class="va">col.row</span>,</span>
<span>  <span class="va">quiet</span>,</span>
<span>  <span class="va">args.fread</span>,</span>
<span>  invert <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">modelname</span>,</span>
<span>  <span class="va">col.model</span>,</span>
<span>  <span class="va">as.fun</span>,</span>
<span>  <span class="va">applyFilters</span>,</span>
<span>  <span class="va">use.rds</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-file">file<a class="anchor" aria-label="anchor" href="#arg-file"></a></dt>
<dd><p>a .lst (output) or a .mod (input) control stream
file. The filename does not need to end in .lst. It is
recommended to use the output control stream because it
reflects the model as it was run rather than how it is planned
for next run. However, see file.mod and dir.data.</p></dd>


<dt id="arg-formats-read">formats.read<a class="anchor" aria-label="anchor" href="#arg-formats-read"></a></dt>
<dd><p>Prioritized input data file formats to look
for and use if found. Default is c("rds","csv") which means
<code>rds</code> will be used if found, and <code>csv</code> if
not. <code>fst</code> is possible too. Default can be modified using
<code><a href="NMdataConf.html">NMdataConf()</a></code>.</p></dd>


<dt id="arg-file-mod">file.mod<a class="anchor" aria-label="anchor" href="#arg-file-mod"></a></dt>
<dd><p>The input control stream file path. Default is to
look for \"file\" with extension changed to .mod (PSN
style). You can also supply the path to the file, or you can
provide a function that translates the output file path to the
input file path. If dir.data is missing, the input control
stream is needed. This is because the .lst does not contain
the path to the data file. The .mod file is only used for
finding the data file. How to interpret the datafile is read
from the .lst file. The default can be configured using
NMdataConf. See dir.data too.</p></dd>


<dt id="arg-dir-data">dir.data<a class="anchor" aria-label="anchor" href="#arg-dir-data"></a></dt>
<dd><p>The data directory can only be read from the
control stream (.mod) and not from the output file (.lst). So
if you only have the output file, use dir.data to tell in
which directory to find the data file. If dir.data is
provided, the .mod file is not used at all.</p></dd>


<dt id="arg-file-data">file.data<a class="anchor" aria-label="anchor" href="#arg-file-data"></a></dt>
<dd><p>Specification of the data file path. When this is
used, the control streams are not used at all.</p></dd>


<dt id="arg-apply-filters">apply.filters<a class="anchor" aria-label="anchor" href="#arg-apply-filters"></a></dt>
<dd><p>If TRUE (default), IGNORE and ACCEPT
statements in the Nonmem control streams are applied before
returning the data. This affects what rows are returned, not
columns.</p></dd>


<dt id="arg-translate">translate<a class="anchor" aria-label="anchor" href="#arg-translate"></a></dt>
<dd><p>If TRUE (default), data columns are named as
interpreted by Nonmem (in `$INPUT`).</p></dd>


<dt id="arg-recover-cols">recover.cols<a class="anchor" aria-label="anchor" href="#arg-recover-cols"></a></dt>
<dd><p>recover columns that were not used in the
Nonmem control stream? This means adding column from the input
data file that are not used in `$INPUT`. If data file contains
more columns than mentioned in `$INPUT`, these will be named
as in data file (if data file contains named variables). This
affects what columns are returned, not rows.</p></dd>


<dt id="arg-details">details<a class="anchor" aria-label="anchor" href="#arg-details"></a></dt>
<dd><p>If TRUE, metadata is added to output. In this case,
you get a list. Typically, this is mostly useful if
programming up functions which behavior must depend on
properties of the output. See details.</p></dd>


<dt id="arg-col-id">col.id<a class="anchor" aria-label="anchor" href="#arg-col-id"></a></dt>
<dd><p>The name of the subject ID column. Optional and only
used to calculate number of subjects in data. Default is
modified by NMdataConf.</p></dd>


<dt id="arg-col-row">col.row<a class="anchor" aria-label="anchor" href="#arg-col-row"></a></dt>
<dd><p>The name of the row counter column. Optional and
only used to check whether the row counter is in the data.</p></dd>


<dt id="arg-quiet">quiet<a class="anchor" aria-label="anchor" href="#arg-quiet"></a></dt>
<dd><p>Default is to inform a little, but TRUE is useful for
non-interactive stuff.</p></dd>


<dt id="arg-args-fread">args.fread<a class="anchor" aria-label="anchor" href="#arg-args-fread"></a></dt>
<dd><p>List of arguments passed to fread. Notice that
except for "input" and "file", you need to supply all
arguments to fread if you use this argument. Default values
can be configured using `NMdataConf()`.</p></dd>


<dt id="arg-invert">invert<a class="anchor" aria-label="anchor" href="#arg-invert"></a></dt>
<dd><p>If TRUE, the data rows that are dismissed by the
Nonmem data filters (ACCEPT and IGNORE) and only this will be
returned. Only used if `apply.filters` is `TRUE`.</p></dd>


<dt id="arg-modelname">modelname<a class="anchor" aria-label="anchor" href="#arg-modelname"></a></dt>
<dd><p>Only affects meta data table. The model name to
be stored if col.model is not NULL. If not supplied, the name
will be taken from the control stream file name by omitting
the directory/path and deleting the .lst extension
(path/run001.lst becomes run001). This can be a character
string or a function which is called on the value of file
(file is another argument to NMscanData). The function must
take one character argument and return another character
string. As example, see NMdataConf()$modelname. The default
can be configured using NMdataConf.</p></dd>


<dt id="arg-col-model">col.model<a class="anchor" aria-label="anchor" href="#arg-col-model"></a></dt>
<dd><p>Only affects meta data table. A column of this
name containing the model name will be included in the
returned data. The default is to store this in a column called
"model". See argument "modelname" as well. Set to NULL if not
wanted. Default can be configured using NMdataConf.</p></dd>


<dt id="arg-as-fun">as.fun<a class="anchor" aria-label="anchor" href="#arg-as-fun"></a></dt>
<dd><p>The default is to return data as a data.frame. Pass
a function (say tibble::as_tibble) in as.fun to convert to
something else. If data.tables are wanted, use
as.fun="data.table". The default can be configured using
NMdataConf.</p></dd>


<dt id="arg-applyfilters">applyFilters<a class="anchor" aria-label="anchor" href="#arg-applyfilters"></a></dt>
<dd><p>Deprecated - use apply.filters.</p></dd>


<dt id="arg-use-rds">use.rds<a class="anchor" aria-label="anchor" href="#arg-use-rds"></a></dt>
<dd><p>Deprecated - use <code>formats.read</code> instead. If
provided (though not recommended), this will overwrite
<code>formats.read</code>, and only formats <code>rds</code> and
<code>csv</code> can be used.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A data set, class defined by 'as.fun'</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Columns that are dropped (using `DROP` or `SKIP` in
    `$INPUT`) in the model will be included in the output.</p>
<p>It may not work if a column is dropped, and a new column is
renamed to the same name. Say you have DV and CONC as the only two
columns (not possible but illustrative), and in Nonmem you do
DV=DROP DV. Not sure it will work in Nonmem, and it probably won't
work in NMscanInput.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>Other DataRead:
<code><a href="NMreadCsv.html">NMreadCsv</a>()</code>,
<code><a href="NMreadTab.html">NMreadTab</a>()</code>,
<code><a href="NMscanData.html">NMscanData</a>()</code>,
<code><a href="NMscanTables.html">NMscanTables</a>()</code></p></div>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Philip Delff.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer></div>




  <script data-goatcounter="https://nmdata.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script></body></html>

