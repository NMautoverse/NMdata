<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Assign exclusion flags to a dataset based on specified table — flagsAssign • NMdata</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Assign exclusion flags to a dataset based on specified table — flagsAssign" />
<meta property="og:description" content="The aim with this function is to take a (say PK) dataset and a
pre-specified table of flags, assign the flags automatically." />
<meta property="og:image" content="https://philipdelff.github.io/NMdata/reference/figures/NMdata_logo_v01.png" />
<meta property="og:image:alt" content="Efficient data preparation, consistency-checking and post-processing in PK/PD modeling" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">NMdata</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.7.2.905</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/NMscanData.html">Automated and general reader of Nonmem data</a>
    </li>
    <li>
      <a href="../articles/DataCreate.html">Data creation tools</a>
    </li>
    <li>
      <a href="../articles/NMdata-FAQ.html">FAQ</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Manual</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="https://github.com/philipdelff/NMdata">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Assign exclusion flags to a dataset based on specified table</h1>
    
    <div class="hidden name"><code>flagsAssign.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The aim with this function is to take a (say PK) dataset and a
pre-specified table of flags, assign the flags automatically.</p>
    </div>

    <pre class="usage"><span class='fu'>flagsAssign</span><span class='op'>(</span>
  <span class='va'>data</span>,
  <span class='va'>tab.flags</span>,
  <span class='va'>subset.data</span>,
  <span class='va'>col.flagn</span>,
  <span class='va'>col.flagc</span>,
  flags.increasing <span class='op'>=</span> <span class='cn'>FALSE</span>,
  as.fun <span class='op'>=</span> <span class='cn'>NULL</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>The dataset to assign flags to.</p></td>
    </tr>
    <tr>
      <th>tab.flags</th>
      <td><p>A data.frame containing at least these named
columns: FLAG, flag, condition. Condition is disregarded for
FLAG==0. FLAG must be numeric and non-negative, flag and
condition are characters.</p></td>
    </tr>
    <tr>
      <th>subset.data</th>
      <td><p>An optional string that provides a subset of
data to assign flags to. A common example is
subset=\"EVID==0\" to only assign to observations. Numerical
and character flags will be missing in rows that are not
matched by this subset.</p></td>
    </tr>
    <tr>
      <th>col.flagn</th>
      <td><p>The name of the column containing the numerical
flag values in tab.flags. This will be added to data. Default
value is FLAG and can be configured using NMdataConf.</p></td>
    </tr>
    <tr>
      <th>col.flagc</th>
      <td><p>The name of the column containing the character
flag values in tab.flags. This will be added to data. Default
value is flag and can be configured using NMdataConf.</p></td>
    </tr>
    <tr>
      <th>flags.increasing</th>
      <td><p>The flags are applied by either decreasing
(default) or increasing value of col.flagn. By using
decreasing order, you can easily adjust the Nonmem IGNORE
statement from IGNORE(FLAG.NE.0) to say IGNORE(FLAG.GT.10) if
BLQ's have FLAG=10, and you decide to include these in the
analysis.</p></td>
    </tr>
    <tr>
      <th>as.fun</th>
      <td><p>The default is to return data.tables if input data
is a data.table, and return a data.frame for all other input
classes. Pass a function in as.fun to convert to something
else. If return.all=F, this is applied to data and tab.flags
independently.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The dataset with flags added. See parameter flags.return
    as well.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>dt.flags must contain a column with numerical exclusion
    flags, one with character exclusion flags, and one with a
    expressions to evaluate for whether to apply the exclusion
    flag. The flags are applied sequentially, by increasing value
    of the numerical exclusion flag.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other DataCreate: 
<code><a href='NMorderColumns.html'>NMorderColumns</a>()</code>,
<code><a href='findCovs.html'>findCovs</a>()</code>,
<code><a href='findVars.html'>findVars</a>()</code>,
<code><a href='flagsCount.html'>flagsCount</a>()</code>,
<code><a href='mergeCheck.html'>mergeCheck</a>()</code>,
<code><a href='objInfo.html'>objInfo</a>()</code>,
<code><a href='stampObj.html'>stampObj</a>()</code>,
<code><a href='tmpcol.html'>tmpcol</a>()</code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='va'>pk</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/readRDS.html'>readRDS</a></span><span class='op'>(</span>file<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"examples/data/xgxr2.rds"</span>,package<span class='op'>=</span><span class='st'>"NMdata"</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>dt.flags</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>
       flagn<span class='op'>=</span><span class='fl'>10</span>,
       flagc<span class='op'>=</span><span class='st'>"Below LLOQ"</span>,
       condition<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"BLQ==1"</span><span class='op'>)</span>
<span class='op'>)</span>
<span class='va'>pk</span> <span class='op'>&lt;-</span> <span class='fu'>flagsAssign</span><span class='op'>(</span><span class='va'>pk</span>,<span class='va'>dt.flags</span>,col.flagn<span class='op'>=</span><span class='st'>"flagn"</span>,col.flagc<span class='op'>=</span><span class='st'>"flagc"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>Coding flagn = 10, flagc = Below LLOQ</span></div><div class='input'><span class='fu'><a href='https://Rdatatable.gitlab.io/data.table/reference/duplicated.html'>unique</a></span><span class='op'>(</span><span class='va'>pk</span><span class='op'>[</span>,<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"flagn"</span>,<span class='st'>"flagc"</span>,<span class='st'>"BLQ"</span><span class='op'>)</span><span class='op'>]</span><span class='op'>)</span>
</div><div class='output co'>#&gt;    flagn        flagc BLQ
#&gt; 1:     0 Analysis set   0
#&gt; 2:    10   Below LLOQ   1</div><div class='input'><span class='fu'><a href='flagsCount.html'>flagsCount</a></span><span class='op'>(</span><span class='va'>pk</span><span class='op'>[</span><span class='va'>EVID</span><span class='op'>==</span><span class='fl'>0</span><span class='op'>]</span>,<span class='va'>dt.flags</span>,col.flagn<span class='op'>=</span><span class='st'>"flagn"</span>,col.flagc<span class='op'>=</span><span class='st'>"flagc"</span><span class='op'>)</span>
</div><div class='output co'>#&gt;                 flagc N.left Nobs.left N.discard N.disc.cum Nobs.discard
#&gt; 1: All available data    150      1352        NA          0           NA
#&gt; 2:         Below LLOQ    131       755        19         19          597
#&gt; 3:       Analysis set    131       755        NA         19           NA
#&gt;    Nobs.disc.cum
#&gt; 1:             0
#&gt; 2:           597
#&gt; 3:           597</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Philip Delff.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


