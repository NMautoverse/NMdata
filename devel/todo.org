* NMdata todo
** Design
*** DONE For a version 0.2.0, omit the extra variability levels
    CLOSED: [2020-06-23 Tue 20:51]
just provide functions to get them
*** DONE Allow for say input.txt/output.txt
    CLOSED: [2020-06-29 Mon 21:28]
**** NMtransInput
*** TODO Support for return as tibble or whatever
Could we use an option, NMdata.return="dplyr::as.tibble" which could then be
reached and applied from within NMdata? It would have to not create extra
dependencies. This solution is being tested on pmxtricks.
*** TODO Where does NMcode2R belong?
It is needed in NMdata but should it be exported from NMdata?
Conclusion: export from pmxtricks, internal in NMdata.
** New functions
*** TODO summary.NMdata
*** TODO NMgetSection
*** TODO NMreplacepart
Instead of the section argument, NMreplacepart must accept newlines as
a named list.
*** TODO A function to check data
**** TODO Find previously used code
**** TODO Implement more checks
https://doi.org/10.1208/s12248-012-9387-9
** Function improvements
*** NMextractText
**** TODO reduce lines and text to one argument
The information is sufficient when taking into account the linesep
arguement. If length(lines) and linesep is given, a warning must be
issued. Once done, NMgetSection must be updated as well.
*** NMtransInput
**** DONE Names of variables must be taken from lst, not mod
     CLOSED: [2020-06-06 Sat 23:43]
mod should only be used for path to dataset.
**** DONE Add support for absolute paths
     CLOSED: [2020-06-09 Tue 23:22]
**** DONE SKIP like DROP
     CLOSED: [2020-06-15 Mon 21:36]
**** TODO TIME and related columns
I still don't really understand the documentation on this, but it doesnt seem
too hard to implement. It should NOT only be interpreted when the A=B format is used in
$INPUT. If something is called TIME, it must be checked for format.
**** DONE .mod files should be accepted as the file argument
     CLOSED: [2020-09-17 Thu 15:19]
     Maybe file can be missing/NULL if file.mod is given.
*** NMtransFilters
**** DONE Replace single = with ==
     CLOSED: [2020-06-15 Mon 21:05]
According to the manual single = can be used for comparisons. This is not and
should not be translated by NMcode2R.
**** DONE $INPT is an alias for $INPUT
     CLOSED: [2020-06-15 Mon 21:09]
**** TODO Implement NULL 
The way to change the missing string in nonmem. User could use
NULL=NAN which would mean that NA should be interpreted as NA in R.
**** TODO Implement or at least detect RECORDS
A way to limit rows read into nonmem
*** NMscanTables
**** DONE Lastonly does the same as firstonly
     CLOSED: [2020-07-13 Mon 19:37]
*** NMscanData
**** TODO check overview.tables
Either they must be firstonly, or they must be full.length.
**** TODO Limitation: tables with EXCLUDE_BY
**** DONE Limitation: FIRSTLASTONLY
     CLOSED: [2020-07-13 Mon 19:37]
**** DONE Implement recoverRows using mergeByFilters
     CLOSED: [2020-06-23 Tue 20:52]
**** TODO Add support for col.row of length>1
**** DONE Consistent behaviour when missing data arguments
     CLOSED: [2020-09-17 Thu 16:03]
***** use.input (default)
****** Means that output data will be merged onto input data
****** If input data is missing or merge not possible, give warning
****** if only firstonly data available, do the merge if possible
***** mergeByFilters (defult in future?)
***** Only allowed if use.input=TRUE
***** Means that we will translate NM filters and cbind rather than using a row identifier.
***** If the filters go wrong, give error
***** Firstonly (FO) data can only be used if ID is both input and FO table
  We can implement taking the sequence of IDs from input and restore
  ID's from that
**** TODO Improve summary of what tables were used and how.
Right now it only says if input or output. Table name would be helpful.
**** TODO Support for no ID, no ROW in firstonly tables
If mergeByFilters we can take the sequence of ID in the input
data. But what if an ID comes back? I think a record is in FIRSTONLY
whenever ID changes, but test this.
**** TODO Check if ID has been corrupted by output format
check if variables are consistent within ROW: ID (others?) This is
fatal and will happen when using long ID's and non-matching format
when writing tables from Nonmem.
**** TODO When using input data, ID should never be read from output data
**** TODO Run NMorderColumns in the end
Remember to use what we know about col.row. And put output variables first?
**** DONE source for nmout and model must be internal
     CLOSED: [2020-07-18 Sat 23:13]
in var table 
**** TODO report tables that are not used
See xgxr013.lst in test_NMscanData. A firstonly table cannot be included. This
is not visible in summary because summary is based on tables in returned
data. It should be based on tables in meta$tables.
*** NMwriteData
**** DONE Check if character variables contain commas
     CLOSED: [2020-09-19 Sat 09:52]
This will cause trouble when writing csv
**** TODO Use fwrite rather than write.csv
**** TODO Improve support for custom IGNORE/ACCEPT statements
Support for both ignore and accept? A list?
**** TODO Returned text should be a list of sections.
Ultimately, NMreplacePart must accept this as argument.
**** DONE The Nonmem instructions should not include character variables
     CLOSED: [2020-09-17 Thu 22:13]
**** DONE Include an argument to do =DROP
     CLOSED: [2020-09-19 Sat 09:27]
This will only affect the instructions to pass into Nonmem. If =DROP
is on a character variable, subsequent numerics can still be used in
Nonmem.
**** DONE print out dropped variables? 
     CLOSED: [2020-09-19 Sat 09:27]
Not warning. Warning if standard variable?
*** NMordercolumns
**** TODO Polish
*** flagsAssign
**** TODO Improve messages at each FLAG coding
**** TODO Old todo list
## Per default, should not overwrite already assigned FLAG. User may
## have hardcoded some flags already.

## check that all PKdata$FLAG have a value matching tab.flags$FLAG. Then merge
## on the flag values.

## Check that tab.flags contain a numeric called FLAG and a character/factor
## called flag.

## Check that FLAG, flag, and condition contain unique values

## Add an increasing variable to PKdata so we can arrange the observations
## exactly as they were to begin with.

## arrange back to original order

## This function must handle NA ID's and maybe FAS as well.

## If EVID is present, only treat EVID==0. Or maybe better group by EVID.

** Nonmem examples
*** DONE Use FLAG
    CLOSED: [2020-06-29 Mon 21:28]
rerun xmgr001.mod with IGNORE=(FLAG.NE.0) That would be a nice example
for the vignette.
*** DONE Update all runs with updated data file
    CLOSED: [2020-07-02 Thu 09:28]
** Discussion
*** recoverRows can mean mix of variable interpretations
If recoverRows and a variable is changing interpretation from input to
output, the resulting table will carry two distinct variables
depending on nmout TRUE or FALSE.
** Prepare first CRAN release
*** DONE Get overview of functionality contents
    CLOSED: [2020-09-17 Thu 16:06]
*** DONE Remove all debug arguments
    CLOSED: [2020-09-20 Sun 15:31]
*** DONE Polish NMwriteData
    CLOSED: [2020-09-20 Sun 13:52]
*** DONE Polish NMordercolumns
    CLOSED: [2020-09-27 Sun 10:04]
*** DONE Support for tibbles
    CLOSED: [2020-09-22 Tue 13:39]
*** DONE Improve flagsAssign messages at each FLAG coding
    CLOSED: [2020-09-22 Tue 21:12]
*** DONE Read through all documentation
    CLOSED: [2020-10-15 Thu 20:02]
*** DONE Function family DataRead for NMscanData and others
    CLOSED: [2020-09-27 Sun 10:32]
*** DONE Rename DataWrangling to DataCreate
    CLOSED: [2020-09-27 Sun 10:31]
*** DONE NMtransFilters - read through and clean comments
    CLOSED: [2020-09-22 Tue 19:28]
*** DONE messageWrap cites the messages from within
    CLOSED: [2020-09-22 Tue 19:20]
    Should be possible to make say a warning seem like it's coming
    from one level up.
*** DONE vignette on data set creation
    CLOSED: [2020-10-09 Fri 21:13]
*** DONE vignette on FAQ
    CLOSED: [2020-10-09 Fri 21:13]
*** DONE Fix NMscanData messages to be just one.
    CLOSED: [2020-10-15 Thu 13:09]
*** DONE Vignettes should mostly use data.frame's.
    CLOSED: [2020-11-24 Tue 19:46]
*** DONE Release 0.0.6
    CLOSED: [2020-10-18 Sun 11:00]
**** DONE Look for file.mod option
     CLOSED: [2020-10-15 Thu 20:50]
**** DONE Release 0.0.6.1
     CLOSED: [2020-11-24 Tue 19:46]
 with only diff from 0.0.6 that it returns data.frames by default
*** DONE check of mtimes relative to each other
    CLOSED: [2020-11-25 Wed 10:33]
*** DONE Test input with duplicated column names
    CLOSED: [2020-11-27 Fri 22:06]
*** DONE summary.NMdata: no visible global function definition for '.'
    CLOSED: [2020-12-22 Tue 19:01]
replaced a couple of calls to . by list. Not sure why this happens for
exactly these uses of ".". Anyway, no consequence to functionality.
*** DONE Drop filepath_NMdata
    CLOSED: [2020-12-22 Tue 19:01]
*** TODO Release 0.0.7
**** Update vignettes
***** TODO NMscanData
***** TODO FAQ
***** TODO DataCreate
**** TODO document data objects
See how it's done in pmxtricks
