<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NMdata FAQ • NMdata</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="NMdata FAQ">
<meta property="og:description" content="NMdata">
<meta property="og:image" content="https://philipdelff.github.io/NMdata/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">NMdata</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.7.2.902</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/NMscanData.html">Automated and general reader of Nonmem data</a>
    </li>
    <li>
      <a href="../articles/DataCreate.html">Data creation tools</a>
    </li>
    <li>
      <a href="../articles/NMdata-FAQ.html">FAQ</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Manual</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="https://github.com/philipdelff/NMdata">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="NMdata-FAQ_files/header-attrs-2.8/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>NMdata FAQ</h1>
            
      
      
      <div class="hidden name"><code>NMdata-FAQ.Rmd</code></div>

    </div>

    
    
<p>Built 2021-06-10 using NMdata 0.0.7.2.902.</p>
<div id="general-nmdata-questions" class="section level2">
<h2 class="hasAnchor">
<a href="#general-nmdata-questions" class="anchor"></a>General <code>NMdata</code> questions</h2>
<div id="how-do-i-install-nmdata" class="section level3">
<h3 class="hasAnchor">
<a href="#how-do-i-install-nmdata" class="anchor"></a>How do I install NMdata?</h3>
<p>To get the development version of <code>NMdata</code>, do the following from within R:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://remotes.r-lib.org">remotes</a></span><span class="op">)</span>
<span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">"philipdelff/NMdata"</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://philipdelff.github.io/NMdata">NMdata</a></span><span class="op">)</span></code></pre></div>
<p>In a production environment, use a <a href="https://github.com/philipdelff/NMdata/releases">github release</a> To install <code>NMdata 0.0.7.1</code> release, do (notice “<span class="citation">@v</span>”:)</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://remotes.r-lib.org">remotes</a></span><span class="op">)</span>
<span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">"philipdelff/NMdata@v0.0.7.1"</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://philipdelff.github.io/NMdata">NMdata</a></span><span class="op">)</span></code></pre></div>
<p>This example is not automatically updated to latest available release. Please make sure to check for latest version on (<a href="https://github.com/philipdelff/NMdata/releases" class="uri">https://github.com/philipdelff/NMdata/releases</a>)</p>
<p>If you need to archive a script that is dependent on a feature or bug fix which is only in the master branch, you can request a release.</p>
</div>
<div id="what-about-nmdata-dependencies" class="section level3">
<h3 class="hasAnchor">
<a href="#what-about-nmdata-dependencies" class="anchor"></a>What about NMdata dependencies?</h3>
<p><code>NMdata</code> depends on <code>data.table</code> only, and <code>data.table</code> does not have any dependencies. R 3.0 or later is required, that’s all (yes, you can actually run this on pretty old R installations without any difference).</p>
</div>
<div id="why-one-more-tool-for-interacting-with-nonmem-from-r" class="section level3">
<h3 class="hasAnchor">
<a href="#why-one-more-tool-for-interacting-with-nonmem-from-r" class="anchor"></a>Why one more tool for interacting with Nonmem from R?</h3>
<p>Other tools exist for reading data from Nonmem. However, <code>NMdata</code> aims at assuming as little as possible about how you work while still doing (and checking) as much as possible for you. Tools in <code>NMdata</code> do not assume you use other tools in <code>NMdata</code>. If you like just one function in <code>NMdata</code> and want to integrate that in your workflow without bothering about the rest, that is perfectly possible. <code>NMdata</code> aims at being able to integrate with anything else and still do the job.</p>
<p>While many other tools available provide plotting functions, <code>NMdata</code> focuses on getting the data ready for smooth Nonmem experience (by checking as much as possible first), get the resulting data out of Nonmem and a little processing.</p>
<p>If you are building tools that process data from Nonmem, you may find very valuable tools here. I have not seen as generic and flexible a Nonmem data reader elsewhere.</p>
</div>
<div id="i-use-another-tool-that-automatically-reads-my-data--should-i-be-interested-in-nmdata" class="section level3">
<h3 class="hasAnchor">
<a href="#i-use-another-tool-that-automatically-reads-my-data--should-i-be-interested-in-nmdata" class="anchor"></a>I use another tool that automatically reads my data. Should I be interested in NMdata?</h3>
<p>The data creation tools in <code>NMdata</code> may still be interesting. If another tool is working well for a project, you may not have any reason to use <code>NMscanData</code> (the Nonmem data reader in <code>NMdata</code>) for it. However, a lot of the time those tools have certain requirements to how datasets are constructed and especially how data is exported from Nonmem (<code>$TABLE</code>). If a Nonmem run does not live up to those requirements, and you want to look at the run results, <code>NMscanData</code> will let you do that without you having to “correct” your <code>$TABLE</code> statements and wait for Nonmem to run again.</p>
<p>Also, in other cases <code>NMscanData</code> can save you a lot of time and frustration even if you have your own routines that make <code>NMdata</code> unnecessary. If you want to read your old Nonmem runs that were done a little differently, someone else’s work, or you want to quickly read a lot of runs done by different people for a meta analysis, <code>NMscanData</code> can save you a lot of work, time and frustration. And a meta analysis of a large number of models implemented by different people over the years? That’s a candy store for <code>NMscanData</code>. Here, <code>NMdata</code> can save you many hours of frustration.</p>
</div>
<div id="why-is-nmdata-fast" class="section level3">
<h3 class="hasAnchor">
<a href="#why-is-nmdata-fast" class="anchor"></a>Why is NMdata fast?</h3>
<p><code>NMdata</code> is generally fast - all thanks to the incredible <code>data.table</code> package. If you don’t use <code>data.table</code> already, <code>NMdata</code> may even seem extremely fast. If you are noticing some circumstances where <code>NMdata</code> seems slow, I am very curious to hear about it.</p>
</div>
<div id="so-nmdata-uses-data-table--does-that-mean-variables-are-modified-by-reference" class="section level3">
<h3 class="hasAnchor">
<a href="#so-nmdata-uses-data-table--does-that-mean-variables-are-modified-by-reference" class="anchor"></a>So NMdata uses data.table. Does that mean variables are modified by reference?</h3>
<p><code>NMdata</code> definitely modify variables by reference internally but this will never affect your workspace. It might improve speed to go all the way, and modify by reference in the user workspace, but using <code>NMdata</code> must be easy for R users at all levels of experience. If you don’t understand what this is all about, you’re fine.</p>
</div>
<div id="i-want-to-use-a-tool-from-nmdata-but-how-does-it-integrate-with-dplyr-or-data-table" class="section level3">
<h3 class="hasAnchor">
<a href="#i-want-to-use-a-tool-from-nmdata-but-how-does-it-integrate-with-dplyr-or-data-table" class="anchor"></a>I want to use a tool from NMdata, but how does it integrate with dplyr or data.table?</h3>
<p>Every function in <code>NMdata</code> has an argument called <code>as.fun</code>. You can provide a function in this argument which will be applied to data before returning it.</p>
<p>You can get a tibble if you work with <code>dplyr</code>/<code>tidyverse</code> tools:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/NMscanData.html">NMscanData</a></span><span class="op">(</span><span class="va">...</span>, as.fun <span class="op">=</span> <span class="fu">tibble</span><span class="fu">::</span><span class="va"><a href="https://tibble.tidyverse.org/reference/as_tibble.html">as_tibble</a></span><span class="op">)</span></code></pre></div>
<p>Under the hood, <code>NMdata</code> is implemented in <code>data.table</code>, and in fact the default is to convert to <code>data.frame</code> before returning the output. So if you want to have <code>data.table</code>’s back, use <code>as.fun="data.table"</code> (notice as a character string, not a function) to avoid the conversion</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/NMscanData.html">NMscanData</a></span><span class="op">(</span><span class="va">...</span>, as.fun <span class="op">=</span> <span class="st">"data.table"</span><span class="op">)</span></code></pre></div>
<p>Using <code>as.fun=as.data.table</code> (a function this time) wold work but is not recommended, because that would do an unnecessary copy of data.</p>
<p>If you want to change the behaviour generally for the session and omit the <code>as.fun</code> argument, you can do this by this option:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## for tibbles</span>
<span class="fu">NMdataConfig</span><span class="op">(</span>as.fun <span class="op">=</span> <span class="fu">tibble</span><span class="fu">::</span><span class="va"><a href="https://tibble.tidyverse.org/reference/as_tibble.html">as_tibble</a></span><span class="op">)</span>
<span class="co">## for data.table</span>
<span class="fu">NMdataConfig</span><span class="op">(</span>as.fun <span class="op">=</span> <span class="st">"data.table"</span><span class="op">)</span></code></pre></div>
<p>All <code>NMdata</code> functions (that return data) should now return tibbles or data.tables. If you use <code>NMdataConfig</code> to control this, for reproducibility please do so explicitly in your script and not in your <code>.Rprofile</code> or similar.</p>
</div>
<div id="the-help-of-an-nmdata-function-says-i-have-to-pass-a-data-frame--can-i-use-a-tibble-or-data-table" class="section level3">
<h3 class="hasAnchor">
<a href="#the-help-of-an-nmdata-function-says-i-have-to-pass-a-data-frame--can-i-use-a-tibble-or-data-table" class="anchor"></a>The help of an NMdata function says I have to pass a data.frame. Can I use a tibble or data.table?</h3>
<p>Absolutely. data.table’s and tibble’s are data.frame’s, and data.frame in the documentation refers to any of these structures (that technically inherit from the data.frame class).</p>
</div>
<div id="the-result-i-am-getting-back-from-an-nmdata-function-doesnt-print-to-the-r-console--why" class="section level3">
<h3 class="hasAnchor">
<a href="#the-result-i-am-getting-back-from-an-nmdata-function-doesnt-print-to-the-r-console--why" class="anchor"></a>The result I am getting back from an NMdata function doesn’t print to the R console. Why?</h3>
<p>This should have been taken care of in most recent NMdata releases. This was something that could happen in earlier versions when working with data.tables - and only when working with data.tables. If you experience this in a &gt;0.0.7 version, pleae file a bug. You would have to print the data.table a couple of times before you see a result in the R terminal.</p>
</div>
<div id="can-i-request-a-feature" class="section level3">
<h3 class="hasAnchor">
<a href="#can-i-request-a-feature" class="anchor"></a>Can I request a feature?</h3>
<p>Please open an issue on <a href="https://github.com/philipdelff/NMdata/issues">github</a>.</p>
</div>
<div id="any-plans-on-including-some-plotting-functions" class="section level3">
<h3 class="hasAnchor">
<a href="#any-plans-on-including-some-plotting-functions" class="anchor"></a>Any plans on including some plotting functions?</h3>
<p>No. See the question above about dependencies. If <code>NMdata</code> were extended with plotting features, it would become dependent on a number of packages, and backward compatibility would be very dificult to ensure.</p>
<p>The only way to provide plotting features for output from <code>NMdata</code> functions, would be to launch a separate package. I rarely need much code to get the plots I want based on the format returned by <code>NMscanData</code> and maybe a call to <code>findCovs</code> or <code>findVars</code>.</p>
</div>
</div>
<div id="questions-specific-to-data-reading-tools" class="section level2">
<h2 class="hasAnchor">
<a href="#questions-specific-to-data-reading-tools" class="anchor"></a>Questions specific to data reading tools</h2>
<div id="what-if-i-dont-use-psn-and-my-control-stream-files-are-named-differently" class="section level3">
<h3 class="hasAnchor">
<a href="#what-if-i-dont-use-psn-and-my-control-stream-files-are-named-differently" class="anchor"></a>What if I don’t use PSN, and my control stream files are named differently?</h3>
<p><code>NMscanData</code> needs the path to the output control stream (technically, the input control stream will work too, but this is not recommended). It has no requirement to the naming of the output control stream. In order to find the input data, it needs the input control stream as well, and it will automatically find it based on the output control stream path and an assumed naming convention based on PSN (which is that the output control stream file name ends in <code>.lst</code> and the input control stream is located next to it ending in <code>.mod</code>). This naming convention can easily be configured using the <code>file.mod</code> option. If you input control streams are ending with <code>.cfg</code>, you can do</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">NMdataConfig</span><span class="op">(</span>file.mod <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">file</span><span class="op">)</span> <span class="fu"><a href="../reference/fnExtension.html">fnExtension</a></span><span class="op">(</span><span class="va">file</span>, <span class="st">".cfg"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>where <code>fnExtension</code> is a very simple function in <code>NMdata</code> which covers this exact purpose. Feel free to use any other tools to put together a function that translates from list file name to input control stream file name.</p>
<p>Another commonly used file structure is to have each run in a separate folder carrying the model name/number. Say the input control stream is always called <code>input.txt</code> and located next to the list file called <code>output.txt</code>, you can use</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">NMdataConfig</span><span class="op">(</span>file.mod <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">file</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/basename.html">dirname</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span>,
    <span class="st">"input.txt"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><code>NMscanData</code> reads the name of the model and adds it to a column in the returned data. If the name of the directory is the model name, you can do the following as well:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">NMdataConfig</span><span class="op">(</span>modelname <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">file</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/basename.html">basename</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/basename.html">dirname</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/normalizePath.html">normalizePath</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Feel free to modify the function to omit parts of the string or add to it.</p>
</div>
<div id="what-is-input-and-output-data" class="section level3">
<h3 class="hasAnchor">
<a href="#what-is-input-and-output-data" class="anchor"></a>What is “input” and output data?</h3>
<ul>
<li>What is referred to as “input data” in <code>NMdata</code> documentation is the datafile read in the <code>$DATA</code> or <code>$INFILE</code>.</li>
<li>What is referred to as “output data” in the same documentation is the totality of files written by <code>$TABLE</code> statements.</li>
</ul>
<p>Notice especially, “output data” does not refer to any of the files automatically written by Nonmem such as <code>.phi</code>, <code>.ext</code>, <code>.cov</code> etc.</p>
</div>
<div id="does-nmdata-read--phi--ext--cov-and-other-files-generated-by-nonmem" class="section level3">
<h3 class="hasAnchor">
<a href="#does-nmdata-read--phi--ext--cov-and-other-files-generated-by-nonmem" class="anchor"></a>Does NMdata read .phi, .ext, .cov and other files generated by Nonmem?</h3>
<p>No. Reading this data is often very useful, but there are other tools out there that do this (e.g. <code>nonmem2R</code>).</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Philip Delff.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
