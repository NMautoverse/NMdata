<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Determine as.fun to use based on argument and options — runAsFun • NMdata</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Determine as.fun to use based on argument and options — runAsFun" />
<meta property="og:description" content="Determine as.fun to use based on argument and options" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">NMdata</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.6.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/NMscanData.html">Automated and general reader of Nonmem data</a>
    </li>
    <li>
      <a href="../articles/DataCreate.html">Data creation tools</a>
    </li>
    <li>
      <a href="../articles/NMdata-FAQ.html">FAQ</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Manual</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="https://github.com/philipdelff/NMdata">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Determine as.fun to use based on argument and options</h1>
    
    <div class="hidden name"><code>runAsFun.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Determine as.fun to use based on argument and options</p>
    </div>

    <pre class="usage"><span class='fu'>runAsFun</span>(<span class='kw'>data</span>, <span class='kw'>as.fun</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>Dataset to possibly convert.</p></td>
    </tr>
    <tr>
      <th>as.fun</th>
      <td><p>A function to apply if not NULL.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Possibly converted data.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>NMdata functions can return objects based on different
    classes. The general default is to return
    data.frames. However, if you prefer working with with other
    classes (typically data.table or tibble), you can have those
    returned instead. In general this is controlled by the run.as
    arguments to functions and the "NMdata.as.fun" option.</p>
<p>You can use the following values for run.as (argument) and
NMdata.as.fun (option):</p>
<ul>
<li><p>"none"Return a data.table. Yes, a data.table and
 not a data.frame. If you work with data.table, this will give the
 best performance.</p></li>
<li><p>a functionApply the function. You
 must supply the actual function, not a string representing
 it. Examples: as.data.frame or tibble::as_tibble. Do not use
 as.data.table - use "none" to get a data.table.</p></li>
<li><p>NULLUse default, i.e. try getOptions("NMdata.as.fun") and if still NULL, rely on default behavior.</p></li>
</ul>

<p>It is perfectly possible but not recommended to convert the
    results coming out of NMdata functions for three reasons</p>
<ul>
<li><p>ConvenienceYou would lose the NMdata class which enables a method like summary to work properly.</p></li>
<li><p>ReliabilityYou would have to do it every time you have called an NMdata function increasing risk of errors.</p></li>
<li><p>Performancecan be significantly better using "none".</p></li>
</ul> 

<p>The functions that return table data structures (like a data.frame)
    take an argument as.fun which controls this behaviour. You can
    also control the default behaviour by the NMdata.as.fun
    option. If not NULL (the default value) as.fun always
    overrules getOption("NMdata.run.as").</p>
<p>For functions that read and process data from the file system
(like NMreadCsv, NMscanData, NMscanTables and many others),
default is data.frame. Default can be overruled using
options(NMdata.run.as=...), and the default behaviour can be
overruled using the run.as argument.</p>
<p>For functions that process a data set supplied in an argument (as
    opposed to reading data from the file system), the class of
    the input data makes a difference. This applies to functions
    like mergeCheck, NMorderCols, findCovs, findVars, flagsAssign,
    flagsCount. If a data.table is supplied to these (and as.fun
    is NULL), a data.table will be returned. If not, a data.frame
    is still default, and the default can be configured using
    options(NMdata.run.as=...).</p>
<p>NMdata heavily uses data.table under the hood, so "none" means
that no conversion is done by the end of the function. Since
NMdata has no other dependencies than data.table, it cannot
convert to other classes unless the user supply the conversion
function.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>dat</span> <span class='op'>&lt;-</span> <span class='fu'><a href='NMscanData.html'>NMscanData</a></span>(<span class='fu'><a href='NMdata_filepath.html'>NMdata_filepath</a></span>(<span class='st'>"examples/nonmem/xgxr001.lst"</span>))
</div><div class='output co'>#&gt; <span class='message'>In NMscanData(NMdata_filepath("examples/nonmem/xgxr001.lst")) : Input data</span>
#&gt; <span class='message'>columns will be appended to output data. However, column(s) were identified as</span>
#&gt; <span class='message'>unique identifiers, present in both input and output data. If this column or</span>
#&gt; <span class='message'>one of these columns is not modified by the Nonmem run, consider using this in</span>
#&gt; <span class='message'>col.row for a robust merge of input and output data. Candidate columns: ROW To</span>
#&gt; <span class='message'>skip this check, please specify either col.row (recommended) or</span>
#&gt; <span class='message'>cbind.by.filters.</span></div><div class='output co'>#&gt; Model:  xgxr001 
#&gt; 
#&gt; Tables, number of columns in tables, and their detail level:
#&gt;            table used/total level
#&gt;  xgxr001_res.txt      16/16   row
#&gt;            input      22/22   row
#&gt; 
#&gt; Numbers of ID's and rows in data
#&gt;       N From output tables From input data only
#&gt;  N.rows                905                    0
#&gt;   N.ids                150                    0
#&gt; 
#&gt; Distribution of rows on event types
#&gt;  EVID From output tables
#&gt;     0                755
#&gt;     1                150</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/class.html'>class</a></span>(<span class='kw'>dat</span>)
</div><div class='output co'>#&gt; [1] "NMdata"     "data.frame"</div><div class='input'><span class='kw'>dat</span> <span class='op'>&lt;-</span> <span class='fu'><a href='NMscanData.html'>NMscanData</a></span>(<span class='fu'><a href='NMdata_filepath.html'>NMdata_filepath</a></span>(<span class='st'>"examples/nonmem/xgxr001.lst"</span>),as.fun=<span class='st'>"none"</span>)
</div><div class='output co'>#&gt; <span class='message'>In NMscanData(NMdata_filepath("examples/nonmem/xgxr001.lst"), as.fun = "none")</span>
#&gt; <span class='message'>: Input data columns will be appended to output data. However, column(s) were</span>
#&gt; <span class='message'>identified as unique identifiers, present in both input and output data. If</span>
#&gt; <span class='message'>this column or one of these columns is not modified by the Nonmem run,</span>
#&gt; <span class='message'>consider using this in col.row for a robust merge of input and output data.</span>
#&gt; <span class='message'>Candidate columns: ROW To skip this check, please specify either col.row</span>
#&gt; <span class='message'>(recommended) or cbind.by.filters.</span></div><div class='output co'>#&gt; Model:  xgxr001 
#&gt; 
#&gt; Tables, number of columns in tables, and their detail level:
#&gt;            table used/total level
#&gt;  xgxr001_res.txt      16/16   row
#&gt;            input      22/22   row
#&gt; 
#&gt; Numbers of ID's and rows in data
#&gt;       N From output tables From input data only
#&gt;  N.rows                905                    0
#&gt;   N.ids                150                    0
#&gt; 
#&gt; Distribution of rows on event types
#&gt;  EVID From output tables
#&gt;     0                755
#&gt;     1                150</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/class.html'>class</a></span>(<span class='kw'>dat</span>)
</div><div class='output co'>#&gt; [1] "NMdata"     "data.table" "data.frame"</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/options.html'>options</a></span>(NMdata.run.as=<span class='st'>"none"</span>)
<span class='kw'>dat</span> <span class='op'>&lt;-</span> <span class='fu'><a href='NMscanData.html'>NMscanData</a></span>(<span class='fu'><a href='NMdata_filepath.html'>NMdata_filepath</a></span>(<span class='st'>"examples/nonmem/xgxr001.lst"</span>))
</div><div class='output co'>#&gt; <span class='message'>In NMscanData(NMdata_filepath("examples/nonmem/xgxr001.lst")) : Input data</span>
#&gt; <span class='message'>columns will be appended to output data. However, column(s) were identified as</span>
#&gt; <span class='message'>unique identifiers, present in both input and output data. If this column or</span>
#&gt; <span class='message'>one of these columns is not modified by the Nonmem run, consider using this in</span>
#&gt; <span class='message'>col.row for a robust merge of input and output data. Candidate columns: ROW To</span>
#&gt; <span class='message'>skip this check, please specify either col.row (recommended) or</span>
#&gt; <span class='message'>cbind.by.filters.</span></div><div class='output co'>#&gt; Model:  xgxr001 
#&gt; 
#&gt; Tables, number of columns in tables, and their detail level:
#&gt;            table used/total level
#&gt;  xgxr001_res.txt      16/16   row
#&gt;            input      22/22   row
#&gt; 
#&gt; Numbers of ID's and rows in data
#&gt;       N From output tables From input data only
#&gt;  N.rows                905                    0
#&gt;   N.ids                150                    0
#&gt; 
#&gt; Distribution of rows on event types
#&gt;  EVID From output tables
#&gt;     0                755
#&gt;     1                150</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/class.html'>class</a></span>(<span class='kw'>dat</span>)
</div><div class='output co'>#&gt; [1] "NMdata"     "data.frame"</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='kw'><a href='https://tibble.tidyverse.org'>tibble</a></span>)
<span class='kw'>dat</span> <span class='op'>&lt;-</span> <span class='fu'><a href='NMscanData.html'>NMscanData</a></span>(<span class='fu'><a href='NMdata_filepath.html'>NMdata_filepath</a></span>(<span class='st'>"examples/nonmem/xgxr001.lst"</span>),as.fun=<span class='kw'>tibble</span>::<span class='kw'><a href='https://tibble.tidyverse.org/reference/as_tibble.html'>as_tibble</a></span>)
</div><div class='output co'>#&gt; <span class='message'>In NMscanData(NMdata_filepath("examples/nonmem/xgxr001.lst"), as.fun =</span>
#&gt; <span class='message'>tibble::as_tibble) : Input data columns will be appended to output data.</span>
#&gt; <span class='message'>However, column(s) were identified as unique identifiers, present in both</span>
#&gt; <span class='message'>input and output data. If this column or one of these columns is not modified</span>
#&gt; <span class='message'>by the Nonmem run, consider using this in col.row for a robust merge of input</span>
#&gt; <span class='message'>and output data. Candidate columns: ROW To skip this check, please specify</span>
#&gt; <span class='message'>either col.row (recommended) or cbind.by.filters.</span></div><div class='output co'>#&gt; Model:  xgxr001 
#&gt; 
#&gt; Tables, number of columns in tables, and their detail level:
#&gt;            table used/total level
#&gt;  xgxr001_res.txt      16/16   row
#&gt;            input      22/22   row
#&gt; 
#&gt; Numbers of ID's and rows in data
#&gt;       N From output tables From input data only
#&gt;  N.rows                905                    0
#&gt;   N.ids                150                    0
#&gt; 
#&gt; Distribution of rows on event types
#&gt;  EVID From output tables
#&gt;     0                755
#&gt;     1                150</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/class.html'>class</a></span>(<span class='kw'>dat</span>)
</div><div class='output co'>#&gt; [1] "NMdata"     "tbl_df"     "tbl"        "data.frame"</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Philip Delff.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


